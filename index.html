<!DOCTYPE html>
<html>
	<head>
		<title>Sorting Algorithms</title>
        <link rel="stylesheet" href="./style/sideMenu.css" />
        <script src="Nodes.js"></script>
        <script src="Package.js"></script>
        <script>
            function getparameter(parameterName){
                let parameters=new URLSearchParams(window.location.search);
                return parameters.get(parameterName);
            }

        </script>

	</head>
	<body style="background-color: rgb(211, 211, 211);">
     <svg id="graph">
     </svg>
<div id="sideMenu" class="menu">
    <div class="StartButtonsContainer">
        <a onclick = "bubbleSortStarter()">Start BubbleSort </a>
        <a onclick = "mergeSortStarter()">Start MergeSort</a>
        <a onclick = "quickSortStarter()">Start QuickSort</a>
        <a onclick = "selectionSortStarter()">Start SelectionSort</a>
        <a onclick = "insertionSortStarter()">Start InsertionSort</a>
        <p>Array Size: <span id="ArraySizeText"></span></p>
        <input type="range" min="10" max="100" id="arraySize">
        <p>Speed:<span id="SpeedText"></span></p>
        <input type="range" min="400" max="1000" id="Speed">
        <a href="#" onclick = "remakeArray()">Remake Array</a>
    </div>
     <div>

    </div>
    </div>



     <script>
        //intialization
        const sizeX=1000,sizeY=370,posY=330,posX=20,graph=[],svgElement=document.getElementById("graph");
        let numbers=Math.floor(getparameter("numbers")), valueList=[],time=getparameter("speed"),sorting=false,sorted=false,counter=0;
        if(numbers==null||numbers<10)
            numbers=15;
        if(time==null)
            time=300;
        let mode="random";
        svgElement.setAttribute("width",sizeX+400); 
        svgElement.setAttribute("height",sizeY*2);
        const textNodes=[],textElement=[],gElement=[],colors=["black","grey","DarkSlateGrey","RoyalBlue","Maroon","DarkSeaGreen"];
        if(mode=="random")
            for(i=0;i<numbers;i++)
                valueList[i]=Math.floor(Math.random()*1000);
            for(i=0;i<numbers;i++){
                gElement[i]=document.createElementNS("http://www.w3.org/2000/svg","g");
                graph[i]=createRectengleElement(sizeX/numbers*i,posY-valueList[i]/Math.max(...valueList)*posY,sizeX/numbers*(4/5),valueList[i]/Math.max(...valueList)*posY,colors[0]);
                textNodes[i]=document.createTextNode(String(valueList[i]));
                textElement[i]=createTextElement(sizeX/numbers*i+sizeX/numbers*(4/5)/2,posY+25,400/numbers,"middle",textNodes[i]);
                if(numbers>40)
                    textElement[i].style.display="none";
                gElement[i].appendChild(graph[i]);
                gElement[i].appendChild(textElement[i]);
                svgElement.appendChild(gElement[i]);
            }
        //end of initialization

        //Delay function
        function delay(time) {
            return new Promise(resolve => {
                setTimeout(() => {
                resolve(time);
                }, time);
            });
        }
        //end of function

        //sliders
        const arraySizeSlider = document.getElementById("arraySize");
        arraySizeSlider.value=numbers;
        const arraySizeOutput=document.getElementById("ArraySizeText");
        arraySizeOutput.innerHTML=arraySizeSlider.value;
        arraySizeSlider.value=numbers;
        arraySizeSlider.oninput = function(){
            arraySizeOutput.innerHTML=arraySizeSlider.value;
        }
        
        const speedSlider = document.getElementById("Speed");
        speedSlider.value=1001-time;
        const speedText=document.getElementById("SpeedText");
        speedText.innerHTML=speedSlider.value;
        speedSlider.oninput = function(){
            time=1001-this.value;
            speedText.innerHTML=speedSlider.value;
        }
        //end of sliders

</script>
	</body>
</html>